# Enterprise RAG Challenge

[![Python](https://img.shields.io/badge/Python-3.9%2B-blue)](https://www.python.org/)
[![Unstructured](https://img.shields.io/badge/Unstructured-0.10.0-orange)](https://unstructured.io/)
[![Pydantic](https://img.shields.io/badge/Pydantic-2.4-green)](https://docs.pydantic.dev/)
[![OpenAI](https://img.shields.io/badge/OpenAI-API-lightgrey)](https://platform.openai.com/)
[![Claude](https://img.shields.io/badge/Claude-3.5-purple)](https://www.anthropic.com/claude)

## Содержание

- [Обзор](#обзор)
- [Архитектура](#архитектура)
- [Этапы работы](#этапы-работы)
- [Инструменты](#инструменты)
- [Установка и запуск](#установка-и-запуск)
- [Структура проекта](#структура-проекта)
- [Примеры использования](#примеры-использования)
- [Команда проекта](#команда-проекта)
- [Презентации](#презентации)

## Обзор

Enterprise RAG Challenge — проект для интеллектуального анализа корпоративных документов с использованием технологии Retrieval-Augmented Generation (RAG). Система обрабатывает PDF-документы, структурирует данные и позволяет получать точные ответы на вопросы на основе содержимого документов.

## Архитектура

Проект построен на трехэтапной архитектуре:

1. **Подготовка данных** — извлечение и структурирование информации из PDF-файлов
2. **Поиск данных для контекста** — определение релевантных частей документов
3. **Генерация ответа** — формирование точного и структурированного ответа

## Этапы работы

### 1. Подготовка данных

- Парсинг PDF в структурированный словарь
- Анализ таблиц и изображений с помощью **Claude 3.5**
- Интеллектуальное связывание метаданных и контента с помощью **OpenAI 4o-mini**
- Построение структуры данных для обработки

### 2. Поиск данных для контекста

- Классификация вопросов по метаданным через LLM
- Поиск контента по метатегам
- Извлечение всех данных страницы (заголовки, контент, анализ таблиц, анализ изображений)

### 3. Генерация ответа

- Формирование ответа на основе найденного контекста
- Структурирование ответа согласно типу запроса

## Инструменты

### Обработка данных

- **Unstructured** — обработка многомодальных данных из PDF:
  - Извлечение текста, таблиц и изображений
  - Конвертация изображений в base64, таблиц в HTML

- **Pydantic** — структурирование и валидация:
  - Создание строгих моделей данных
  - Обеспечение целостности формата на всех этапах

### AI-модели

- **OpenAI 4o-mini** — быстрая обработка метаданных
- **OpenAI 4o** — генерация финальных ответов с контекстуальным пониманием
- **Claude 3.5** — точная конвертация таблиц и текста в структурированный JSON

## ⚠️ Предупреждение об использовании API

**ВНИМАНИЕ!** Данный проект использует платные API OpenAI и Anthropic Claude для обработки документов. При работе с большим количеством PDF-файлов возможно существенное списание средств с вашего баланса API. 

- Перед запуском полного пайплайна на большом наборе данных рекомендуется:
  - Проверить текущий баланс API
  - Запустить тест на небольшом количестве документов
  - При необходимости установить лимиты расходов в настройках API

Разработчики не несут ответственности за непредвиденные расходы, связанные с использованием API.

## Структура проекта

```
RAG_CHELENG_FINISH/
├── data/                      # Директория для хранения документов
│   ├── dataset_v2.json        # Набор данных в формате JSON
│   └── questions.json         # Файл с вопросами
├── LOGS/                      # Директория для логов
├── pdf_preprocessor/          # Модули для предобработки PDF
│   ├── __init__.py            # Инициализация пакета
│   ├── aggregated.py          # Агрегирование данных
│   ├── llm_extct_meta.py      # Извлечение метаданных через LLM
│   ├── llm_img_tbl_job.py     # Обработка изображений и таблиц через LLM
│   ├── pdf_extract.py         # Извлечение данных из PDF
│   └── zip_extract.py         # Распаковка ZIP-архивов
├── prompts/                   # Промпты для моделей
│   └── schema_and_prompts.py  # Схемы данных и промпты
├── rag_pipeline/              # Основные модули пайплайна
│   ├── __init__.py            # Инициализация пакета
│   ├── rag_metadata_questions_pipeline.py  # Пайплайн метаданных и вопросов
│   ├── rag_question_analysis_pipeline.py   # Пайплайн анализа вопросов
├── results/                   # Результаты обработки
├── tests/                     # Тесты проекта
├── .gitignore                 # Настройки Git-игнорирования
├── README.md                  # Описание проекта
├── run_pdf_preprocessor.py    # Запуск предобработки PDF
├── run_rag_pipeline.py        # Единая точка входа для запуска полного пайплайна
├── run_submission.py          # Модуль подготовки результатов

```

## Команда проекта

- **Никита Котиков** — [@n_kotikov](https://t.me/n_kotikov)
- **Максим Немов** — [@dizilx](https://t.me/dizilx)

## Презентации

- [Презентация проекта (русский)](https://drive.google.com/file/d/1v3J_oR3-kkdam6KpjsMaMhVcJaBg-jmN/view?usp=drive_link)
- [Презентация проекта (английский)](https://drive.google.com/file/d/1H7YXAltIrcj-5Zfa9aDVIT5DxjrKGOOx/view?usp=drive_link)
